CREATE OR REPLACE PROCEDURE insert_review(IN_orderId IN NUMBER,IN_comments IN VARCHAR, IN_rating IN NUMBER,
					IN_reviewDate IN VARCHAR,IN_reorder IN VARCHAR) IS
   
    temp_count number(6); 
    review_date DATE;   

    CURSOR review IS
   	 SELECT MAX(reviewId)
   	 FROM REVIEWS;

BEGIN
    OPEN review;
    LOOP
        FETCH review INTO temp_count;
        EXIT WHEN review%NOTFOUND;
    END LOOP;       
    CLOSE review;

    temp_count := temp_count +1;

   DBMS_OUTPUT.PUT_LINE ('Review ID : ' || temp_count);    
   DBMS_OUTPUT.PUT_LINE ('For Order ID : ' || IN_orderId);
   DBMS_OUTPUT.PUT_LINE ('Comments : ' || IN_comments);
   DBMS_OUTPUT.PUT_LINE ('Rating : ' || IN_rating);   
   DBMS_OUTPUT.PUT_LINE ('Review Date : ' || IN_reviewDate);   
   DBMS_OUTPUT.PUT_LINE ('Reorder : ' || IN_reorder); 

    review_date := TO_DATE(IN_reviewDate, 'DD-MM-YYYY HH24:MI');

    insert into reviews values(temp_count,IN_orderId,IN_comments,IN_rating,review_date,IN_reorder);
 
END;
/


exec insert_review(123275,'The fries were great too.',5,TO_DATE('22/01/2017 18:59:48', 'DD/MM/YYYY HH24:MI:SS'),'No');
--exec insert_review(123279,'The fries were great too.',5,TO_DATE('22/01/2017 18:59:48', 'DD/MM/YYYY HH24:MI:SS'),'No');