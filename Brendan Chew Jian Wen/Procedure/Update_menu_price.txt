CREATE OR REPLACE PROCEDURE USER1.UPDATE_MENU_PRICE(
    IN_MENUID IN NUMBER, 
    IN_PRICE  IN NUMBER 
) IS
    V_MENUNAME     VARCHAR(50);
    V_OLD_PRICE    NUMBER(7,2);
    E_INVALIDINPUT EXCEPTION;
BEGIN
    
    -- CHECK IF PRICE IS VALID
    IF (IN_PRICE <= 0 OR IN_PRICE > 200) THEN
        RAISE E_INVALIDINPUT;
    END IF;

    SELECT M.MENUNAME, M.PRICE
    INTO   V_MENUNAME, V_OLD_PRICE
    FROM   MENU M 
    WHERE  M.MENUID = IN_MENUID;

    UPDATE MENU 
    SET    PRICE  = IN_PRICE
    WHERE  MENUID = IN_MENUID;

    DBMS_OUTPUT.PUT_LINE ('RECORD FOUND');
    DBMS_OUTPUT.PUT_LINE ('MENU NAME : ' || V_MENUNAME);    
    DBMS_OUTPUT.PUT_LINE ('OLD PRICE : ' || V_OLD_PRICE);
    DBMS_OUTPUT.PUT_LINE ('NEW PRICE : ' || IN_PRICE);
        
EXCEPTION
    WHEN E_INVALIDINPUT THEN
        DBMS_OUTPUT.PUT_LINE('Invalid Input: Quantity cannot be less than 1 or more than 50.');
        RAISE_APPLICATION_ERROR(-20003, 'Invalid Input: Price cannot be less than 1 or more than 200.');

    WHEN NO_DATA_FOUND THEN 
        DBMS_OUTPUT.PUT_LINE ('No records found for the food item or the menu.');
        RAISE_APPLICATION_ERROR(-20002,'No records found for the food item or the menu.');
    
END UPDATE_MENU_PRICE;
/

SELECT M.MENUNAME, M.PRICE
FROM   MENU M 
WHERE  M.MENUID = 1001;

-- UPDATE
EXEC UPDATE_MENU_PRICE(1001, 10.10);

-- TO REMOVE IT AND TEST AGAIN
UPDATE MENU 
SET    PRICE = 23.5
WHERE  MENUID = 1001;